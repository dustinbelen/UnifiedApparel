<section class="hero product-hero">
  <div class="hero-body">
    <div class="container">
      <h1 class="title product-hero-title">
        <%= @product.name %>
      </h1>
      <h2 class="subtitle product-hero-subtitle">
        <%= link_to @product.category.name, @product.category %>
      </h2>
    </div>
  </div>
</section>
<br>
<%
  counter = 0
  i=0
%>
<div class="columns">
  <div class="column is-4">
    <% @product.product_images.each do |i| %>
      <% if counter == 0 %>
        <%= image_tag(i.image.variant(resize_to_limit: [600, 600]), class: "product-image", onclick: "refs.modalEdicion"+counter.to_s+".open()") if i.image.attached?  %>
        <%= render partial: 'product_image_modal', locals: { product_image: i, counter: counter }%>
        <br>
      <% else %>
        <%= image_tag(i.image.variant(resize_to_limit: [100, 100]), class: "product-image", onclick: "refs.modalEdicion"+counter.to_s+".open()") if i.image.attached? %>
        <%= render partial: 'product_image_modal', locals: { product_image: i, counter: counter }%>
      <% end %>
      <% counter = counter + 1%>
    <% end %>
  </div>
  <div class="column">
    <p class="description mt-6 mb-6"><%=@product.description%></p>
    <p class="title is-size-6 m-0 p-0">Colors Available</p>
    <%= select("colorSelect", "colorSelect", @product.product_colors.all.collect{|pc| [pc.color.name, pc.color.id]})%>
    <br><br>
    <p class="title is-size-6 m-0 p-0">Sizes Available</p>
    <%= select("sizeSelect", "sizeSelect", @product.product_sizes.all.collect{|ps| [ps.size.code, ps.size.id]})%>
    <br><br>
    <p class="title is-size-6 m-0 p-0"></p>Quantity</p>
    <%= number_field_tag 'quantity', nil, min: 1, max: 10%>
    <br><br>
    <%= link_to image_tag("add_to_cart.png", size: "32"), root_path%>
  </div>
</div>




<script>
  var refs = {
    <% counter.times do %>
      modalEdicion<%= i.to_s %>: {
        open: function() { document.getElementById('modalEdicion<%= i.to_s %>').classList.add('is-active');},
        close:function() { document.getElementById('modalEdicion<%= i.to_s %>').classList.remove('is-active');}},
        <% i = i + 1 %>
    <% end %>
  };

</script>